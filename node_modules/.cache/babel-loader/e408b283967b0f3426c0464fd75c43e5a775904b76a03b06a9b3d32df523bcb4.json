{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\tamak\\\\Desktop\\\\Workspace\\\\ppe-watcher\\\\src\\\\components\\\\layout\\\\MainNav.tsx\",\n  _s = $RefreshSig$();\nimport * as React from 'react';\nimport { AppBar, Toolbar, Tabs, Tab } from '@mui/material';\nimport { useNavigate, useLocation } from 'react-router-dom';\nimport { drawerWidth } from './SideNav';\n\n// 主菜单分组 + 默认跳转\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Main = [{\n  key: 'dashboard',\n  label: 'Dashboard',\n  defaultPath: '/overview'\n}, {\n  key: 'history',\n  label: 'History',\n  defaultPath: '/violations'\n}, {\n  key: 'settings',\n  label: 'Settings',\n  defaultPath: '/alerts-settings'\n}];\n// 每个主菜单包含的“首段路径”集合（扁平路由，无 /dashboard 前缀）\nconst GROUPS = {\n  dashboard: new Set(['overview', 'live', 'alerts']),\n  history: new Set(['violations', 'archive', 'snapshots', 'reports']),\n  settings: new Set(['alerts-settings', 'contacts', 'sender', 'security'])\n};\n\n// 根据 URL 推导主菜单 key\nfunction deriveMainKey(pathname) {\n  var _pathname$split$;\n  const first = (_pathname$split$ = pathname.split('/')[1]) !== null && _pathname$split$ !== void 0 ? _pathname$split$ : '';\n  if (GROUPS.history.has(first)) return 'history';\n  if (GROUPS.settings.has(first)) return 'settings';\n  return 'dashboard';\n}\nexport default function MainNav({\n  isMobile\n}) {\n  _s();\n  const navigate = useNavigate();\n  const {\n    pathname\n  } = useLocation();\n\n  // 用字符串 key 作为 Tabs 的受控值，避免 index -1 → 0 的误高亮\n  const activeKey = React.useMemo(() => deriveMainKey(pathname), [pathname]);\n  const handleChange = (_, nextKey) => {\n    const target = Main.find(m => m.key === nextKey);\n    navigate(target.defaultPath); // 切到该组的默认子页\n  };\n  return /*#__PURE__*/_jsxDEV(AppBar, {\n    position: \"fixed\",\n    color: \"default\",\n    elevation: 0,\n    sx: {\n      // 放在 TopBar 下方；按你的 TopBar 高度调整\n      top: {\n        xs: 56,\n        sm: 64\n      },\n      zIndex: t => t.zIndex.appBar - 1\n    },\n    children: /*#__PURE__*/_jsxDEV(Toolbar, {\n      sx: {\n        p: 0\n      },\n      children: /*#__PURE__*/_jsxDEV(Tabs, {\n        value: activeKey,\n        onChange: handleChange,\n        \"aria-label\": \"Main navigation\",\n        variant: isMobile ? 'scrollable' : 'standard',\n        sx: {\n          ml: 1,\n          pl: {\n            md: `${drawerWidth - 40}px`\n          }\n        },\n        children: Main.map(m => /*#__PURE__*/_jsxDEV(Tab, {\n          value: m.key,\n          label: m.label,\n          sx: {\n            mx: 5\n          }\n        }, m.key, false, {\n          fileName: _jsxFileName,\n          lineNumber: 63,\n          columnNumber: 13\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 44,\n    columnNumber: 5\n  }, this);\n}\n_s(MainNav, \"EpJvg8ttzlt6+09XD2fqt79xTaY=\", false, function () {\n  return [useNavigate, useLocation];\n});\n_c = MainNav;\nvar _c;\n$RefreshReg$(_c, \"MainNav\");","map":{"version":3,"names":["React","AppBar","Toolbar","Tabs","Tab","useNavigate","useLocation","drawerWidth","jsxDEV","_jsxDEV","Main","key","label","defaultPath","GROUPS","dashboard","Set","history","settings","deriveMainKey","pathname","_pathname$split$","first","split","has","MainNav","isMobile","_s","navigate","activeKey","useMemo","handleChange","_","nextKey","target","find","m","position","color","elevation","sx","top","xs","sm","zIndex","t","appBar","children","p","value","onChange","variant","ml","pl","md","map","mx","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/Users/tamak/Desktop/Workspace/ppe-watcher/src/components/layout/MainNav.tsx"],"sourcesContent":["import * as React from 'react';\nimport { AppBar, Toolbar, Tabs, Tab } from '@mui/material';\nimport { useNavigate, useLocation } from 'react-router-dom';\nimport { drawerWidth } from './SideNav';\n\n// 主菜单分组 + 默认跳转\nconst Main = [\n  { key: 'dashboard', label: 'Dashboard', defaultPath: '/overview' },\n  { key: 'history', label: 'History', defaultPath: '/violations' },\n  { key: 'settings', label: 'Settings', defaultPath: '/alerts-settings' },\n] as const;\ntype MainKey = (typeof Main)[number]['key'];\n\n// 每个主菜单包含的“首段路径”集合（扁平路由，无 /dashboard 前缀）\nconst GROUPS: Record<MainKey, Set<string>> = {\n  dashboard: new Set(['overview', 'live', 'alerts']),\n  history: new Set(['violations', 'archive', 'snapshots', 'reports']),\n  settings: new Set(['alerts-settings', 'contacts', 'sender', 'security']),\n};\n\n// 根据 URL 推导主菜单 key\nfunction deriveMainKey(pathname: string): MainKey {\n  const first = pathname.split('/')[1] ?? '';\n  if (GROUPS.history.has(first)) return 'history';\n  if (GROUPS.settings.has(first)) return 'settings';\n  return 'dashboard';\n}\n\ntype Props = { isMobile: boolean };\n\nexport default function MainNav({ isMobile }: Props): React.ReactElement | null {\n  const navigate = useNavigate();\n  const { pathname } = useLocation();\n\n  // 用字符串 key 作为 Tabs 的受控值，避免 index -1 → 0 的误高亮\n  const activeKey = React.useMemo<MainKey>(() => deriveMainKey(pathname), [pathname]);\n\n  const handleChange = (_: React.SyntheticEvent, nextKey: MainKey) => {\n    const target = Main.find((m) => m.key === nextKey)!;\n    navigate(target.defaultPath); // 切到该组的默认子页\n  };\n\n  return (\n    <AppBar\n      position=\"fixed\"\n      color=\"default\"\n      elevation={0}\n      sx={{\n        // 放在 TopBar 下方；按你的 TopBar 高度调整\n        top: { xs: 56, sm: 64 },\n        zIndex: (t) => t.zIndex.appBar - 1,\n      }}\n    >\n      <Toolbar sx={{ p: 0 }}>\n        <Tabs\n          value={activeKey}\n          onChange={handleChange}\n          aria-label=\"Main navigation\"\n          variant={isMobile ? 'scrollable' : 'standard'}\n          sx={{ ml: 1, pl: { md: `${drawerWidth - 40}px` } }}\n        >\n          {Main.map((m) => (\n            <Tab key={m.key} value={m.key} label={m.label} sx={{ mx: 5 }} />\n          ))}\n        </Tabs>\n      </Toolbar>\n    </AppBar>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}